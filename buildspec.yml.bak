version: 0.2

phases:
  build:
    commands:
       - echo "starting build..."
       - ds=$(date +"%y%m%d.%S")
       # Build a fat jar of our code using SBT
       - sbt assembly
       # Since we want our pipeline to automatically deploy our changes, we also assume our Github repo also has a Cloud Formation template
       # that contains any resources we need to create for say a Lambda Function, e.x. maybe we need to create a new DynamoDB table
       #- aws cloudformation package --template-file template.yaml --s3-bucket plume-development-test-scala-build --output-template-file package.yaml
 artifacts:
  discard-paths: yes
  files:
    # These are our "artifacts", e.g. the output of our build system we'd like Code Build to do something with
    - target/scala-2.12/assembly-${ds}.jar
    - package.yaml
